"use strict";var render=function(a){a.empty();var e=$('<div class="wrapper"></div>'),t=function(){render(a)};null==state.modal&&(e.append(Header(t)),e.append(Board(t))),"modal"==state.modal&&e.append(Modal(t)),a.append(e)},state={pin:null,page:null,pin2:null,page2:null,pines:null,modal:null,id:null,data:null,image:null,creator:null,nameBoard:null,titulo:null,nota:null,publicado:null,site:null};$(function(a){$.get("https://api.pinterest.com/v1/boards/arabelyuska/web-ui/pins/?access_token=AZ2i9KfK4bcYVlQFmQ2ZjB8JS7DRFM4qVqQ9s7REItsdIWA_dQAAAAA&fields=id%2Clink%2Cnote%2Curl%2Ccreated_at%2Ccounts%2Ccolor%2Cboard%2Cattribution%2Cmedia%2Cmetadata%2Coriginal_link%2Ccreator%2Cimage",function(a){if(!a)return alert("no hay data gg");state.pin=a.data,state.page=a.page;var e=$("#root");render(e)})});var Board=function(a){var e=state.pin;console.log(e);var t=state.pin.length;console.log(t);var s=$('<section class="board js-board"></section>');return e.forEach(function(a){var e=$('<div class="item"></div>'),t=$('<div class="item__stack"></div>'),i=$('<img src="'+a.image.original.url+'" id="'+a.id+'" class="item__stack--image" alt="imagen"/>');s.append(e),e.append(t),t.append(i)}),s.on("click",function(e){console.log(e.target),"item__stack--image"==e.target.className&&(console.log(e.target),console.log("entraste al modal")),state.id=e.target.id,state.modal="modal",console.log(state.id);var t="https://api.pinterest.com/v1/pins/"+state.id+"/?access_token=Aa2YxXXEIidEuD9GjPBGjd2P-DgLFM591TrMQMBEItsdIWA_dQAAAAA&fields=id%2Clink%2Cnote%2Curl%2Cimage%2Cmetadata%2Coriginal_link%2Ccreated_at%2Ccreator%2Ccounts%2Cmedia%2Cattribution%2Cboard%2Ccolor";console.log(t),$.get(t,function(e){if(!e)return alert("no hay data");state.data=e.data,console.log(state.data),state.image=state.data.image.original.url,state.creator=state.data.creator.first_name,state.nameBoard=state.data.board.name,state.titulo=state.data.metadata.article,state.nota=state.data.note,state.site=state.data.metadata.link,console.log(state.site),document.getElementsByTagName("body")[0].style.overflow="hidden",a()})}),setTimeout(function(){$.get(state.page.next,function(a){if(!a)return alert("no hay data");state.pin2=a.data,state.page2=a.page,console.log(state.pin2),console.log(state.pin2.length)})},2e3),$(document).scroll(function(){var a=$(window).height(),e=$(document).height(),t=$(document).scrollTop();console.log("Este es el scroll"+t),console.log("Este es el tamaño del browser"+a),console.log("tamaño del ventana "+e),console.log("suma "+(t+e));t+a>=e&&(console.log("cargar más contenido"),console.log(state.pin2),state.pin2.forEach(function(a){$(".item__stack").append('<img src="'+a.image.original.url+'" id="'+a.id+'" class="item__stack--image" alt="imagen"></img>')}))}),s},Header=function(){var a=$('<header class="header"></header>'),e=$('<nav class="header__nav row"><div class="col m1 header__nav--logo"><a href="https://www.pinterest.com/"><img src="assets/img/pinterest-logo.png" class="responsive-img" alt="Logo de Pinterest"><span>Inicio</span></a></div></nav>'),t=$('<div class="header__nav--search col m9"><i class="material-icons" aria-hidden="true">search</i></div>'),s=$('<input class="input" type="text" placeholder="Buscar">'),i=$('<div class="col m2 header__nav__link"></div>'),n=$('<div class="header__nav__link--arrow"><div class="img"></div></div>'),o=$('<div class="header__nav__link--profile"><div class= "img"></div></div>'),l=$('<div class="header__nav__link--message"><div class="img"></div></div>'),d=$('<div class="overlay"></div>'),r=$('<div class="header__links row"></div>'),c=$('<div class="header__links__container col m8 offset-m2"></div>'),p=$('<div class="header__links__container--share"><img src="assets/img/upload.png" class="icon"></div>'),m=$('<h5 class="header__links__container--title"></h5>'),v=$('<div class = "header__links__container--btn"><button class="btn waves-effect waves-dark">Seguir tablero</button></div>'),g=$('<div class="header__info row"></div>'),u=$('<div class="header__info__container col m8 offset-m2"></div>'),_=$('<h3 class="header__info--title"></h3>'),f=$('<p class="header__info--pines"></p>'),h=$('<p class="header__info--followers"></p>'),C=$('<div class="header__info--photo"></div>'),k=$('<img src = "">');i.append(n),i.append(o),i.append(l),c.append(p),c.append(m),c.append(v),t.append(s),e.append(t),e.append(i),C.append(k),u.append(_),u.append(f),u.append(h),u.append(C),g.append(u),r.append(d),r.append(c),a.append(e),a.append(r),a.append(g),s.on("focus",function(){$(".overlay").css("height","100%")}),s.on("blur",function(){$(".overlay").css("height","0%")}),$(window).scroll(function(a){var e=$(window).scrollTop();console.log(e),e>200?m.slideDown("slow"):m.slideUp("slow")}),m.text(state.creator.name),_.text(state.creator.name),k.attr("src",state.user.image["60x60"].url);var b=state.creator.counts.pins,w=state.creator.counts.followers;return 1==b&&(f.text("Pin"),f.prepend("<span>"+b+"</span>")),b>1&&(f.text("Pines"),f.prepend("<span>"+b+"</span>")),1==w&&(h.text("Seguidor"),h.prepend("<span>"+w+"</span>")),w>1&&(h.text("Seguidores"),h.prepend("<span>"+w+"</span>")),a};$(function(a){$.get("https://api.pinterest.com/v1/boards/arabelyuska/web-ui/?access_token=AYMIa2oLkXknBloAFiu4m4JgizYCFM6h7-Y-SZREIt2CCGA55wAAAAA&fields=id%2Cname%2Curl%2Ccounts%2Ccreator%2Cimage%2Ccreated_at%2Cdescription%2Cprivacy%2Creason",function(a){if(!a)return alert("no hay data");state.creator=a.data}),$.get("https://api.pinterest.com/v1/users/arabelyuska/?access_token=AY63jaQ3e0B2yj9qHpP9E-Zsk0XvFM6kn4W6PzFEIt2CCGA55wAAAAA&fields=first_name%2Cid%2Clast_name%2Curl%2Cimage%2Caccount_type%2Cusername%2Cbio%2Ccounts%2Ccreated_at",function(a){if(!a)return alert("no hay data");state.user=a.data})});var Modal=function(a){console.log("portada Modal");var e,t,s,i,n,o;console.log(state.site),console.log(state.titulo),console.log(state.data),void 0==state.titulo&&(e=state.data.note,t="Sin información",i="http://www.imagen.com.mx/assets/img/imagen_share.png",n=" ",o=" ... "),void 0!=state.titulo&&(e=state.titulo.name,t=null!=state.titulo.published_at?state.titulo.published_at:"sin información",i=state.data.metadata.link.favicon,n=state.data.metadata.link.title,o=state.titulo.description),void 0==state.site&&(s=" "),void 0!=state.site&&(s="Artículo de "+state.site.site_name),console.log(i),console.log(n),console.log(o);var l=$('<section class="modalModal"></section>'),d=$('<div class="item"></div>'),r=$('<span id="close">X</span>'),c=$('<div class="item__stack"></div>'),p=$('<div class="item__stack--titlePrincipal">'+n+"</div>"),m=$('<img src="'+state.image+'" class="item__stack--image" alt="imagen" />'),v=$('<div class="item__info"></div>'),g=$('<div class="item__info--pin-count"></div>'),u=$('<i class="fa fa-thumb-tack" aria-hidden="true">'),_=$('<div class="item__info--titles">'+e+"</div>"),f=$('<h3 class="item-title"></h3>'),h=$('<div class="item-subtl"></div>'),C=$('<div class="item__info--proced"></div>'),k=$('<div class="proced--site"> '+s+"</div>"),b=$('<img src="'+i+'" alt="favicon" width="15%">'),w=$('<p class="item__info--descrip">'+o+"</p>"),A=$('<div class="comentarios"></div>'),y=$('<a href="#">Comentarios</a>'),x=$('<div class="none"><input type="text" placeholder="Añadir un comentario..."/></div>'),B=$('<div class="item__info--publicar">Publicado</div>'),E=$('<div class="publicar--fecha">'+t+"</div>"),M=$('<div class="item__info--user"></div>'),S=$('<div class="item-avatar"></div>'),I=$('<div class="item-data"></div>'),P=$('<div class="item-data__dataname">'+state.creator+" lo guardó en "+state.nameBoard+" </div>"),F=$('<div class="item-data__tagline">'+state.nota+"</div>");return l.append(d),d.append(r),d.append(c),c.append(p),c.append(m),d.append(v),v.append(g),g.append(u),v.append(_),_.append(f),_.append(h),v.append(C),C.append(b),C.append(k),v.append(w),v.append(A),A.append(y),A.append(x),v.append(B),B.append(E),v.append(M),M.append(S),M.append(I),I.append(P),I.append(F),r.on("click",function(e){console.log(e.target),state.modal=null,document.getElementsByTagName("body")[0].style.overflow="auto",a()}),y.on("click",function(a){console.log(a.target),console.log(a.target.nextSibling),"block"==a.target.nextSibling.style.display?a.target.nextSibling.style.display="none":a.target.nextSibling.style.display="block"}),l};